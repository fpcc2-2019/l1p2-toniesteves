---
title: "Antônio Esteves"
output: html_notebook
---

## O quê

Como usamos dados derivados dos logs de eventos da wikimedia, aqui primeiro exploramos esses logs para entender como os eventos foram coletados, e para procurar características inesperadas. 

```{r}
library(tidyverse)
library(lubridate)
library(gridExtra)
library(grid)
theme_set(theme_bw())
```


1. Qual é a nossa taxa de cliques geral diária? Como isso varia entre os grupos?

2. Quais resultados as pessoas tendem a tentar primeiro? Como isso muda no dia-a-dia?

3. Qual é a nossa taxa de resultados zero no geral? Como isso varia entre os grupos?

4. A duração da sessão é aproximadamente o tempo entre o primeiro e o último evento de uma sessão. Escolha uma variável do conjunto de dados e descreva sua relação com o tamanho da sessão. Visualize o relacionamento.

5. Resuma suas descobertas em um resumo executivo.

## Lendo os eventos

```{r ETL}
buscas = read_csv("../data/search_data.csv")
```


```{r}
glimpse(buscas)
```


```{r}
search_dates <- buscas %>% 
  mutate(search_date = format(session_start_date, "%d-%m-%Y"))

glimpse(search_dates)
```

```{r}
zero_results = buscas %>% 
    filter(results == 0)
```

```{r}
# session_duration = buscas %>% 
#     filter(results == 0)
```

```{r}
search_dates %>%
    ggplot(aes(x = num_clicks, alpha=0.3, coloe)) +
    geom_jitter(data = search_dates,
                aes(y=search_date),
                width = .1
                color = "grey") +
    geom_point()

# group_a_plots = search_dates %>%
#     filter( group == "a") %>% 
#     ggplot(aes(x = num_clicks, y=search_date)) +
#     geom_jitter(
#         # width = .5,
#         alpha = .7,
#         # size = 1,
#         height = 0.1,
#         color = "grey"
#     )+
#     coord_flip() 
# 
# 
# group_b_plots = search_dates %>%
#     filter( group == "b") %>% 
#     ggplot(aes(x = num_clicks, y=search_date)) +
#     geom_jitter(
#         # width = .5,
#         alpha = .7,
#         # size = 1,
#         height = 0.1,
#         color = "orange"
#     )+
#     coord_flip() 
# 
# grid.arrange(group_a_plots, group_b_plots, ncol = 2, bottom="Temperatura Média")
```

```{r}
buscas %>% 
    ggplot(aes(x = num_clicks)) +
    geom_density()

buscas %>% 
    ggplot(aes(x = num_clicks)) + 
    geom_histogram(binwidth = 5) 
```

